<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<title>Untitled Document</title>
<style>
      /* Always set the map height explicitly to define the size of the div
       * element that contains the map. */
      #map {
        height: 100%;
      }
      /* Optional: Makes the sample page fill the window. */
      html, body {
        height: 100%;
        margin: 0;
        padding: 0;
      }
    </style>

</head>

<body>
<div id="map"></div>
    <script>
	var map;
	var markers = [];
    function initMap() {
		var myLatlng = {lat: 47.473015, lng: 19.053245};
		map = new google.maps.Map(document.getElementById('map'), {
		  zoom: 16,
		  center: myLatlng
		});
		//magic, csinál kattintásra jelöloket
		google.maps.event.addListener(map, 'click', function(event) {
			addMarker(event.latLng);
		});
	}
	function addMarker(location) {
		var marker = new google.maps.Marker({
		  position: location,
		  map: map,
		  draggable: true
       	});
		//duplakatt törli
       	markers.push(marker);
		marker.addListener('dblclick',function(){
			marker.setVisible(false);
			tombRendez();
			marker.setMap(null);
		});
     }
	 function tombRendez()	{
	 	var i = 0;
	 	for(i = 0; i < markers.lenght; i++) {
			if(!i.getVisible()) {
				i = null;
				break;
			}
		}
		for(var j = i; j < markers.lenght - 1; j++) {
			j = j + 1;
		}
	 }	
    </script>

    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAnD0cYl_LFXsQOrjMj_8dkOCbW1cUNldE&callback=initMap"
    async defer></script>

</body>
</html>
